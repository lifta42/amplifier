<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The Amplifier Project: Some Information About the Implementation of naive-dict.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The Amplifier Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Some Information About the Implementation of naive-dict. </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>There are two underlying strategy of getting/setting key-value pairs in naive-dict (as <code>dict</code> in following). When the scale of a dictionary is small, the data are stored linearly. Because there's no way to compare keys, so they are left unsorted. If the dictionary grows bigger enough, the type will be changed to hash. The hash method of key type will be used and open addressing scheme will be applied on collisions. There's no way reverse to convert, because <code>dict</code> does not support deletion.</p>
<p>At the beginning of <code>dict.c</code>, there are two constant definitions:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> dict_initial      = 16;</div><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> dict_hash_initial = 32;</div></div><!-- fragment --><p>The first one indicates the initial size set for a dictionary which is created with <a class="el" href="dict_8h.html#a94b38f0c85137f7d9637983bfdbe2701">dict_create</a>, and the second one indicates the cut-off size of linear and hash dictionary.</p>
<p>The linear type dictionary is pretty much slower than the hash type one, but a hash type dictionary takes up more space, since they are never full filed; if a key takes too many times to look up and is not found eventually during an invocation of <a class="el" href="dict_8h.html#ab725cc2b97d7ea69724d5f9ecfe1637b">dict_put</a>, the dictionary will be extended before inserting the new key-value pair. The behavior is controlled by the following constant:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> dict_hash_longest = 4;</div></div><!-- fragment --><p>Which means the limitation of tolerance of times of looking up one key is 4 by default. Notice that a dictionary will never be extended during a reading by <a class="el" href="dict_8h.html#a15d1c116c463d58aaf0ec20fe5aaea14">dict_get</a>, no matter how many times it takes to find the key and whether the key is found or not, because getter function accepts a constant dictionary as argument and cannot modify it.</p>
<p>The constant <code>dict_hash_longest</code> should never exceed <code>dict_hash_initial</code>, or unexpected and undetermined consequence may be caused.</p>
<p>The three constant described above are chosen almost randomly. The <code>dict</code> module was first implemented to complete the base of <code>dfa</code> module located in <code>auto</code>, which represents DFA and its instance. A DFA is usually be created as the spirit of a regex string, and such DFA's states would have tens of connections to other states, and rarely up to 100, because there are not so much ASCII characters to act as symbols. So the dictionaries of states in DFA probably have similar numbers of keys. This is the reason of choosing such numbers as default of <code>dict</code>. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
